{{ if eq .chezmoi.os "windows" -}}
<#
    Post‑install script for Windows
    Installs CLI tools via Scoop and required PowerShell modules.
    Idempotent – safe to re‑run.
#>

# ensure NuGet provider + PSGallery trust
if (-not (Get-PackageProvider -Name NuGet -ErrorAction SilentlyContinue)) {
    Install-PackageProvider -Name NuGet -MinimumVersion 2.8.5.201 `
                           -Scope CurrentUser -Force
}
if ((Get-PSRepository -Name PSGallery).InstallationPolicy -ne 'Trusted') {
    Set-PSRepository -Name PSGallery -InstallationPolicy Trusted
}

Install-Module PSfzf -Scope CurrentUser -Force

Write-Host "Windows shell tooling is ready."
{{ end -}}
